### Введение в Kubernetes

\\ комментарий автора \
\\ в идеале ещё накидать ссылок с пруфами, как работает етцд, бинари и рафт.

Kubernetes или k8s — это система управления контейнерами или оркестратор контейнеров. Он автоматизирует развертывание, масштабирование и управление приложениями в контейнерах. 
Позволяет управлять приложениями, разбивая их на микросервисы. Kubernetes поддерживает высокую доступность и восстановление после сбоев за счет распределённого хранилища etcd.

Состоит k8s в ванильной версии всего из 5 бинарей и key-value хранилища. 
Бинарь 1.
kube-apiserver: Сердце кластера, через который происходит всё взаимодействие между его компонентами и внешними клиентами. Представляет из себя REST API-сервер.
Бинарь 2.
kube-scheduler: Компонент, который распределяет поды по узлам кластера, основываясь на ресурсах и требованиях.
Бинарь 3.
kube-controller-manager: Управляет контроллерами, которые следят за состоянием кластера.
Бинарь 4.
kube-proxy: Сетевой прокси, который управляет сетевым трафиком для сервисов, обеспечивая доступ к подам.
Бинарь 5.
kubelet: Unix-демон, который управляет контейнерами на узле. Взаимодействует с container runtime, обычно это containerd или, в более ранних версиях k8s, docker.

И key-value хранилище, где хранится всё состояние кластера -- это etcd.

Самый распространённый способ взаимодействия с кластером k8s, а точнее с его api-сервером, это его консольный клиент -- `kubectl`.
Синтаксис у неё прост: 
```sh
kubectl [команда] [тип_ресурса] [имя_ресурса] [опции]
```
Например, если я хочу посмотреть, какие сервера сейчас находятся в кластере:
```sh
kubectl get nodes
```
Или вывести на консоль значение секрета `docker-config-secret` в неймспейсе `my-namespace` в формате yaml:
```sh
kubectl get secrets -n  my-namespace docker-config-secret -o yaml
```
С его помощью можно управлять сущностями внутри кластера: создавать, удалять, просматривать и т.д.

\\ комментарий автора \
\\ тут ещё нужно рассказать про авторизацию в кластере (кубконфиги), про сущности (поды, деплоименты и прочее) \
\\ дальше можно рассказать по то, что компоненты куба заменяемы, можно принести другой шедулер, например, а так же донести доп. контроллеры, например ингрессы и прочее \
\\ а так же, что есть вспомогательные компоненты, такие как: метрик-сервер, днс и проч.

---
### Квиз
Вопрос: За счет какого компонента kubernetes осуществляется его отказоустойчивость:
1) kube-apiserver (нет. апи-сервер не хранит никакого состояния. в случае сбоя его поды переместятся на другую ноду)
2) kubelet (нет. в случае недоступности kubelet будет недоступна всего лишь одна нода в кластере)
3) etcd (верно. в нем хранится всё состояние кластера. в случае выхода из строя одной и нод etcd, кластер будет доступен за счет алгоритма RAFT

Вопрос: С каким компонентом кластера взаимодейтсвуют все внешние ресурсы
1) kubelet (нет. kubelet отвечает за взаимодействие с container runtime)
2) kube-apiserver (верно. аписервер отвечает за координацию работы всех компонентов кластера, как внутренних и внешних)
3) kube-controller-manager (нет. контроллер-менеджер только отвечает за работу сущностей внутри кластера)
